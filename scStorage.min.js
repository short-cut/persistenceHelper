/**
 * version 1.0
 */
window.scStorage={},function(e){scStorage.config={prefix:"scs_",version:null,defaultUsePersistent:!0,defaultGlobalNameSpace:"scdefault"},scStorage.isAvailable=null,scStorage.setConfig=function(e){for(var o in e)o in scStorage.config&&(scStorage.config[o]=e[o])},scStorage.globals={},scStorage.setGlobal=function(e,o,a){if(("string"!=typeof a||"undefined"==typeof a)&&(a=scStorage.config.defaultGlobalNameSpace),"string"!=typeof e)throw"scStorage::addGlobal parameter key must be a string";"object"!=typeof this.globals[a]&&(this.globals[a]={}),this.globals[a][e]=o},scStorage.getGlobal=function(e,o){return("string"!=typeof o||"undefined"==typeof o)&&(o=scStorage.config.defaultGlobalNameSpace),this.globals[o]&&e in this.globals[o]?this.globals[o][e]:null},scStorage.getAllGlobals=function(){return scStorage.globals},scStorage.removeGlobal=function(e,o){return("string"!=typeof o||"undefined"==typeof o)&&(o=scStorage.config.defaultGlobalNameSpace),this.globals[o]&&e in scStorage.globals[o]?(delete scStorage.globals[o][e],!0):!1},scStorage.isStorageAvailable=function(){if("boolean"==typeof scStorage.isAvailable)return scStorage.isAvailable;if(window.sessionStorage||window.localStorage){var e="yes";try{window.localStorage.setItem("lsAvailable",e),"yes"!=localStorage.getItem("lsAvailable")&&(scStorage.isAvailable=!0),localStorage.removeItem("lsAvailable"),scStorage.isAvailable=!0}catch(o){scStorage.isAvailable=!1}}else scStorage.isAvailable=!1;return scStorage.isAvailable},scStorage.set=function(e,o,a,t){if(a="undefined"!=typeof a?a:scStorage.config.defaultUsePersistent,a&&"object"==typeof t)try{t=t.toISOString()}catch(r){throw"parameter validUntil must be a javascript date object."}else t=!1;if(e=scStorage.config.prefix+e,!scStorage.isStorageAvailable())throw"scStorage: storage is not possible, because there is no storage medium available";var s=a?"localStorage":"sessionStorage",i={payload:o};if(null!==scStorage.config.version){if("number"!=typeof scStorage.config.version)throw"scStorage::set version must be numeric.";i.version=scStorage.config.version}return t&&(i.validUntil=t),window[s].setItem(e,JSON.stringify(i)),scStorage},scStorage.get=function(e){e=scStorage.config.prefix+e;var o=null;if(!scStorage.isStorageAvailable())throw"scStorage: unable to retrieve data from storage because there is no storage available";var a=window.localStorage.getItem(e)||window.sessionStorage.getItem(e);try{a=JSON.parse(a),o=a.payload}catch(t){return null}if(null!==scStorage.config.version&&(!a.version||a.version<scStorage.config.version))return scStorage.remove(e,!0),null;if(a.validUntil){var r=new Date(a.validUntil),s=new Date;if(s>r)return scStorage.remove(e,!0),null}return o},scStorage.remove=function(e,o){if(!e)throw"scStorage::clear key is required";return("boolean"!=typeof o||0==o)&&(o=!1),o||(e=scStorage.config.prefix+e),scStorage.isStorageAvailable()&&(window.localStorage.removeItem(e),window.sessionStorage.removeItem(e)),scStorage}}();