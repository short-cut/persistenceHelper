window.scStorage={},function(a){scStorage.config={prefix:"scs_",version:null,defaultUsePersistent:!0,defaultGlobalNameSpace:"scdefault"},scStorage.isAvailable=null,scStorage.setConfig=function(a){for(var b in a)if(b in scStorage.config){var c=a[b];"version"==b&&(c=parseFloat(c)),scStorage.config[b]=c}},scStorage.globals={},scStorage.setGlobal=function(a,b,c){if("string"==typeof c&&"undefined"!=typeof c||(c=scStorage.config.defaultGlobalNameSpace),"string"!=typeof a)throw"scStorage::addGlobal parameter key must be a string";"object"!=typeof this.globals[c]&&(this.globals[c]={}),this.globals[c][a]=b},scStorage.getGlobal=function(a,b){return"string"==typeof b&&"undefined"!=typeof b||(b=scStorage.config.defaultGlobalNameSpace),this.globals[b]&&a in this.globals[b]?this.globals[b][a]:null},scStorage.getAllGlobals=function(){return scStorage.globals},scStorage.removeGlobal=function(a,b){return"string"==typeof b&&"undefined"!=typeof b||(b=scStorage.config.defaultGlobalNameSpace),!!this.globals[b]&&(a in scStorage.globals[b]&&(delete scStorage.globals[b][a],!0))},scStorage.isStorageAvailable=function(){if("boolean"==typeof scStorage.isAvailable)return scStorage.isAvailable;if(window.sessionStorage||window.localStorage){var a="yes";try{window.localStorage.setItem("lsAvailable",a),"yes"!=localStorage.getItem("lsAvailable")&&(scStorage.isAvailable=!0),localStorage.removeItem("lsAvailable"),scStorage.isAvailable=!0}catch(a){scStorage.isAvailable=!1}}else scStorage.isAvailable=!1;return scStorage.isAvailable},scStorage.set=function(a,b,c,d){if(c="undefined"!=typeof c?c:scStorage.config.defaultUsePersistent,c&&"object"==typeof d)try{d=d.toISOString()}catch(a){throw"parameter validUntil must be a javascript date object."}else d=!1;if(a=scStorage.config.prefix+a,!scStorage.isStorageAvailable())return NULL;var e=c?"localStorage":"sessionStorage",f={payload:b};if(null!==scStorage.config.version){if("number"!=typeof scStorage.config.version)throw"scStorage::set version must be numeric.";f.version=scStorage.config.version}return d&&(f.validUntil=d),window[e].setItem(a,JSON.stringify(f)),scStorage},scStorage.get=function(a){a=scStorage.config.prefix+a;var b=null;if(!scStorage.isStorageAvailable())return NULL;var c=window.localStorage.getItem(a)||window.sessionStorage.getItem(a);try{c=JSON.parse(c),b=c.payload}catch(a){return null}if(null!==scStorage.config.version&&(!c.version||c.version<scStorage.config.version))return scStorage.remove(a,!0),null;if(c.validUntil){var d=new Date(c.validUntil),e=new Date;if(d<e)return scStorage.remove(a,!0),null}return b},scStorage.remove=function(a,b){if(!a)throw"scStorage::clear key is required";return"boolean"==typeof b&&0!=b||(b=!1),b||(a=scStorage.config.prefix+a),scStorage.isStorageAvailable()&&(window.localStorage.removeItem(a),window.sessionStorage.removeItem(a)),scStorage}}();